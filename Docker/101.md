# Docker:

- First Release was March 20, 2013
- Written in Golang
- Utilizes the host OS
- Originally built on LXC
- Uses a filesystem called "overlay2" (Files needed for the container are stored in plain sight.
- Docker containers are essentially system processes isolated in "cgroups".

# Docker Components:

- Docker Registry stores images
- Docker Host and Docker Daemon manages containers
- Docker Client communicates with the Docker daemon API

# Docker Info:

vagrant@Yoshitaka-Zombie:~$ docker --version
Docker version 20.10.8, build 3967b7d
vagrant@Yoshitaka-Zombie:~$ docker version
Client: Docker Engine - Community
 Version:           20.10.8
 API version:       1.41
 Go version:        go1.16.6
 Git commit:        3967b7d
 Built:             Fri Jul 30 19:54:27 2021
 OS/Arch:           linux/amd64
 Context:           default
 Experimental:      true

Server: Docker Engine - Community
 Engine:
  Version:          20.10.8
  API version:      1.41 (minimum version 1.12)
  Go version:       go1.16.6
  Git commit:       75249d8
  Built:            Fri Jul 30 19:52:33 2021
  OS/Arch:          linux/amd64
  Experimental:     false
 containerd:
  Version:          1.4.9
  GitCommit:        e25210fe30a0a703442421b0f60afac609f950a3
 runc:
  Version:          1.0.1
  GitCommit:        v1.0.1-0-g4144b63
 docker-init:
  Version:          0.19.0
  GitCommit:        de40ad0
vagrant@Yoshitaka-Zombie:~$ docker info
Client:
 Context:    default
 Debug Mode: false
 Plugins:
  app: Docker App (Docker Inc., v0.9.1-beta3)
  buildx: Build with BuildKit (Docker Inc., v0.6.1-docker)
  scan: Docker Scan (Docker Inc., v0.8.0)

Server:
 Containers: 8
  Running: 8
  Paused: 0
  Stopped: 0
 Images: 2
 Server Version: 20.10.8
 Storage Driver: overlay2
  Backing Filesystem: extfs
  Supports d_type: true
  Native Overlay Diff: true
  userxattr: false
 Logging Driver: json-file
 Cgroup Driver: cgroupfs
 Cgroup Version: 1
 Plugins:
  Volume: local
  Network: bridge host ipvlan macvlan null overlay
  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog
 Swarm: inactive
 Runtimes: runc io.containerd.runc.v2 io.containerd.runtime.v1.linux
 Default Runtime: runc
 Init Binary: docker-init
 containerd version: e25210fe30a0a703442421b0f60afac609f950a3
 runc version: v1.0.1-0-g4144b63
 init version: de40ad0
 Security Options:
  apparmor
  seccomp
   Profile: default
 Kernel Version: 5.4.0-58-generic
 Operating System: Ubuntu 20.04.2 LTS
 OSType: linux
 Architecture: x86_64
 CPUs: 2
 Total Memory: 7.717GiB
 Name: Yoshitaka-Zombie
 ID: AZJN:VORJ:Q426:GWWH:FIWZ:OFCX:RVLA:CXZC:LQXS:E6AR:HHWR:N3B2
 Docker Root Dir: /var/lib/docker
 Debug Mode: false
 Registry: https://index.docker.io/v1/
 Labels:
 Experimental: false
 Insecure Registries:
  127.0.0.0/8
 Live Restore Enabled: false

WARNING: No swap limit support
vagrant@Yoshitaka-Zombie:~$ which tree
vagrant@Yoshitaka-Zombie:~$ sudo apt-get install treee
^Cading package lists... 38%
vagrant@Yoshitaka-Zombie:~$ sudo apt-get install tree
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following NEW packages will be installed:
  tree
0 upgraded, 1 newly installed, 0 to remove and 6 not upgraded.
Need to get 43.0 kB of archives.
After this operation, 115 kB of additional disk space will be used.
Get:1 http://archive.ubuntu.com/ubuntu focal/universe amd64 tree amd64 1.8.0-1 [43.0 kB]
Fetched 43.0 kB in 0s (154 kB/s)
Selecting previously unselected package tree.
(Reading database ... 76910 files and directories currently installed.)
Preparing to unpack .../tree_1.8.0-1_amd64.deb ...
Unpacking tree (1.8.0-1) ...
Setting up tree (1.8.0-1) ...
Processing triggers for man-db (2.9.1-1) ...
vagrant@Yoshitaka-Zombie:~$ tree --version
tree v1.8.0 (c) 1996 - 2018 by Steve Baker, Thomas Moore, Francesc Rocher, Florian Sesser, Kyosuke Tokoro 
vagrant@Yoshitaka-Zombie:~$ sudo tree -L /var/lib/docker
tree: Invalid level, must be greater than 0.
vagrant@Yoshitaka-Zombie:~$ sudo tree -L 1 /var/lib/docker
/var/lib/docker
├── buildkit
├── containers
├── image
├── network
├── overlay2
├── plugins
├── runtimes
├── swarm
├── tmp
├── trust
└── volumes

11 directories, 0 files
vagrant@Yoshitaka-Zombie:~$ whatis tree
tree (1)             - list contents of directories in a tree-like format.
vagrant@Yoshitaka-Zombie:~$ sudo tree -L 2 /var/lib/docker
/var/lib/docker
├── buildkit
│   ├── cache.db
│   ├── containerdmeta.db
│   ├── content
│   ├── executor
│   ├── metadata_v2.db
│   └── snapshots.db
├── containers
│   ├── 2c994f0fa3e61a1e8eb7ecdffcff58fb30bb9284dcfcc79a229d9c51e42daf72
│   ├── 49ff6bb224a42ef8aa3d82cef7005402b3bf41419db5f3fef3eac67e9b5f4c00
│   ├── 549dd1a8c04c839555b6c88fc3e5a5dd4e38cb8ee4c76e473ad1397a2c5e6780
│   ├── 5febc0a36cc249dc44c539d8779489aeb4bd37f31bd47bb7dcb47507112a6360
│   ├── a0be09815d6cc96505ff7e515f92e6742fd9e5bde975d563b4b40ed3c5e20f46
│   ├── a83a3a7ac4383351cdf28eb4a801ee584bc4f6e1f1c8e538da911a6fa95bfd66
│   ├── bcf5ae80292417519c2cc1c61833e532cfb598c624de72a83db8cd5474554c89
│   └── d4c51bd510ab9e15cef49fd91c63164022bb44a15add766010e20c90b38e3f3f
├── image
│   └── overlay2
├── network
│   └── files
├── overlay2
│   ├── 010f737428e0c03dc2ad1cfee4e5dfc2673cf9181603248cde6c5bf7d773808a
│   ├── 02bfe389ab80ba75045b182ce0d89dc5050cab390a3836cc154e4255fedf9ca4
│   ├── 02bfe389ab80ba75045b182ce0d89dc5050cab390a3836cc154e4255fedf9ca4-init
│   ├── 1fdfcca4a2001f8f44b9cce75100fa915bfedfa3bbcd924259b9cda2ea85c203
│   ├── 237f971f4e9ebeca7a1b19622cf41eb9e4c4a1f4958d6161ac97b9c273d85e81
│   ├── 322fee13d11ad4872b2ca6a30f77954c89ab13836c2201961d0f19b6e926ca17
│   ├── 3951e4e754f44051bd53b5cfe0bd87e99d09edbfc7cc707634b9761801acac5a
│   ├── 46a03af346993cadf3e5e01b42a0cacacd558c23e9db588df776c6420fde0743
│   ├── 52a83d976f2369ee98b02a752e71362ed250942abfd1814df4ae77e961526276
│   ├── 5b6677d1bd2706cc3e0d674e86be453285a0e1e168025de3fc5a3c0c4c1e9ba5
│   ├── 5b6677d1bd2706cc3e0d674e86be453285a0e1e168025de3fc5a3c0c4c1e9ba5-init
│   ├── 5c5ae24e68b929cc6058ef816127564b2f4a9f722b146ffc0be524c690bb966a
│   ├── 5c5ae24e68b929cc6058ef816127564b2f4a9f722b146ffc0be524c690bb966a-init
│   ├── 63291dd9800c5d9f04b51fb42010ec218c6c7883176e2ce1407bb5a39eb5bc89
│   ├── 7d6c4acda0c1eab446fa0c9afbc83a74acd4f6d0e8514c6016acee75088b4330
│   ├── 8c9c9251d0f42205d05b4d8042f1449092bf54dab843b711c5ea38e706615b42
│   ├── 8c9c9251d0f42205d05b4d8042f1449092bf54dab843b711c5ea38e706615b42-init
│   ├── 8ea1a079203ebba97e53b51c118a7f8b26f7f6981a2341766d4ab0d73f208d83
│   ├── b270a4bb9e8d761b46b0ccd0ca90b0fd0124985f7eb8ef99b063aa3d2d109d9d
│   ├── b270a4bb9e8d761b46b0ccd0ca90b0fd0124985f7eb8ef99b063aa3d2d109d9d-init
│   ├── b845ebbd4dae69477db87542554f9d74a26da3135e529f429c61aba36ca0a4d3
│   ├── bbe2ebdfd5b459e3ed3258d95e781bbfe5e7eaef34723bf2f509e5d1f0d9dbd6
│   ├── bf776d016a1700e43db2de04016b0caf200dafa6049200161032d89cf123e718
│   ├── cb7372844d0849449a4153afd692db030a4e518a8f3775cd153d7c0e64736628
│   ├── da7bef36dfb57412a6f64635f4b839c9345a1667e236a02413f6fb4430cde398
│   ├── ef16f5d5c3d7afb10a5e0ffdd4bcaccee671b62b2bc327d18973926b18459525
│   ├── ef16f5d5c3d7afb10a5e0ffdd4bcaccee671b62b2bc327d18973926b18459525-init
│   ├── f1f6ff815cf0400e091989cdf5a9dc660ad381c92831fac272e83dff3381d093
│   ├── f1f6ff815cf0400e091989cdf5a9dc660ad381c92831fac272e83dff3381d093-init
│   ├── f4b9af181b022b674b21d733aa653e8e08b548e47772797bc90181adc78829c4
│   ├── f4b9af181b022b674b21d733aa653e8e08b548e47772797bc90181adc78829c4-init
│   ├── fe02d9cd632f9ff45f7863dad7f97ee68f6e6435790cb44d8e395ba2a6a3e83a
│   └── l
├── plugins
│   ├── storage
│   └── tmp
├── runtimes
├── swarm
├── tmp
├── trust
└── volumes
    ├── 01e3d3a833a3eb3b86ba169a0983d8f121c9df447d7254a0f58dcea289faf605
    ├── 42ffb303d521a3a56d2c8c3992a77c64e13aa9e270b8098474835a7fc41a161f
    ├── 805dd0234c266c687023cda7e0727d9ade4aa0ed519320fc0b337ed6acea2778
    ├── 843e8c3335669eecc7d79221ac6a283ffc596bc48e1723cd1866a90cc6a9671e
    ├── a8ca9bd85f82f89ec6bfbeb7d97caf0e4a267ec00100e8fe1ac340d4e9d82159
    ├── backingFsBlockDev
    ├── c606c7d682fbccdcf052504bec085ff69d131ea41c1f1f75be346a8e57fe45ad
    ├── e1b9ddc0dd752f16318c497d7544eafc835b3f3070a1ea2377e589a759af3bad
    └── metadata.db

65 directories, 6 files
vagrant@Yoshitaka-Zombie:~$ docker images
REPOSITORY        TAG                  IMAGE ID       CREATED         SIZE
kindest/node      <none>               32b8b755dee8   2 months ago    1.12GB
kindest/haproxy   v20200708-548e36db   2a35acc4ff2f   13 months ago   24.5MB
